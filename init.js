!function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var n=function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e};function a(e,t){return e(t={exports:{}},t.exports),t.exports}var r=a((function(e){function t(n,a){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,a)}e.exports=t}));var o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},i=a((function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t}));var c=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};var u=function(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t},f=a((function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t})),s={t:!1,i:!1,o:15e3},d=window,p=d.console,m=document,l=d.navigator,v=d.performance,y=function(){return l.deviceMemory},g=function(){return l.hardwareConcurrency},x=function(){return v&&!!v.getEntriesByType&&!!v.now&&!!v.mark},h="4g",T=!1,b=function(){return!!(g()&&g()<=4)||!!(y()&&y()<=4)},w=function(e,t){return!!b()||!!["slow-2g","2g","3g"].includes(e)||!!t},k={u:!1},S=function(e){m.hidden&&(e(),k.u=m.hidden)},P=function(e){return parseFloat(e.toFixed(2))},N=function(e){return"number"!=typeof e?null:P(e/Math.pow(1024,2))},E=[1e3,2500],I=[2500,4e3],_=[100,300],R=[.1,.25],j=[300,600],O={fp:E,fcp:E,lcp:I,lcpFinal:I,fid:_,fidVitals:_,cls:R,clsFinal:R,tbt:j,tbt5S:j,tbt10S:j,tbtFinal:j},B=function(e,t){return O[e]?t<=O[e][0]?"good":t<=O[e][1]?"needsImprovement":"poor":null},C=function(e,t,n){var a;a=function(){k.u&&e.indexOf("Final")<0||!s.analyticsTracker||s.analyticsTracker({metricName:e,data:t,eventProperties:n||{},navigatorInformation:l?{deviceMemory:y()||0,hardwareConcurrency:g()||0,serviceWorkerStatus:"serviceWorker"in l?l.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:b(),isLowEndExperience:w(h,T)}:{},vitalsScore:B(e,t)})},"requestIdleCallback"in d?d.requestIdleCallback(a,{timeout:3e3}):a()},M=function(e,t,n){Object.keys(t).forEach((function(e){"number"==typeof t[e]&&(t[e]=P(t[e]))})),C(e,t,n)},F=function(e,t,n){var a=P(e);a<=s.o&&a>=0&&C(t,a,n)},D={},L={value:0},A={value:0},q={value:0},z={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},W={value:0},V=function(e){var t=e.pop();t&&!t.s&&t.value&&(L.value+=t.value)},G={},U=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){p.warn("Perfume.js:",e)}return null},Y=function(e){G[e]&&G[e].disconnect(),delete G[e]},$=function(e){var t=e.pop();t&&(F(t.processingStart-t.startTime,"fidVitals",{performanceEntry:t}),F(t.duration,"fid",{performanceEntry:t})),Y(1),F(q.value,"lcp"),G[3]&&"function"==typeof G[3].takeRecords&&G[3].takeRecords(),F(L.value,"cls"),F(W.value,"tbt"),setTimeout((function(){F(W.value,"tbt5S")}),5e3),setTimeout((function(){F(W.value,"tbt10S"),M("dataConsumption",z.value)}),1e4)},H=function(e){e.forEach((function(e){if(!("self"!==e.name||e.startTime<A.value)){var t=e.duration-50;t>0&&(W.value+=t)}}))},J=function(e){e.forEach((function(e){"first-paint"===e.name?F(e.startTime,"fp"):"first-contentful-paint"===e.name&&(A.value=e.startTime,F(A.value,"fcp"),G[4]=U("longtask",H),Y(0))}))},K=function(e){var t=e.pop();t&&(q.value=t.renderTime||t.loadTime)},Q=function(e){e.forEach((function(e){e.identifier&&F(e.startTime,e.identifier)}))},X=function(e){e.forEach((function(e){if(s.t&&M("resourceTiming",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;z.value[e.initiatorType]+=t,z.value.total+=t}}))},Z=function(){G[2]&&(F(q.value,"lcpFinal"),Y(2)),G[3]&&("function"==typeof G[3].takeRecords&&G[3].takeRecords(),F(L.value,"clsFinal"),Y(3)),G[4]&&(F(W.value,"tbtFinal"),Y(4))},ee=function(e){var t="usageDetails"in e?e.usageDetails:{};M("storageEstimate",{quota:N(e.quota),usage:N(e.usage),caches:N(t.caches),indexedDB:N(t.indexedDB),serviceWorker:N(t.serviceWorkerRegistrations)})},te=function(){function e(e){void 0===e&&(e={}),this.l="5.3.0",s.analyticsTracker=e.analyticsTracker,s.t=!!e.resourceTiming,s.i=!!e.elementTiming,s.o=e.maxMeasureTime||s.o,x()&&("PerformanceObserver"in d&&(G[0]=U("paint",J),G[1]=U("first-input",$),G[2]=U("largest-contentful-paint",K),s.t&&U("resource",X),G[3]=U("layout-shift",V),s.i&&U("element",Q)),void 0!==m.hidden&&m.addEventListener("visibilitychange",S.bind(this,Z)),M("navigationTiming",function(){if(!x())return{};var e=v.getEntriesByType("navigation")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart}}()),M("networkInformation",function(){if("connection"in l){var e=l.connection;return"object"!=typeof e?{}:(h=e.effectiveType,T=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),l&&l.storage&&"function"==typeof l.storage.estimate&&l.storage.estimate().then(ee))}return e.prototype.start=function(e){x()&&!D[e]&&(D[e]=!0,v.mark("mark_"+e+"_start"),k.u=!1)},e.prototype.end=function(e,t){void 0===t&&(t={}),x()&&D[e]&&(v.mark("mark_"+e+"_end"),delete D[e],M(e,P(function(e){v.measure(e,"mark_"+e+"_start","mark_"+e+"_end");var t=v.getEntriesByName(e).pop();return t&&"measure"===t.entryType?t.duration:-1}(e)),t))},e.prototype.endPaint=function(e,t){var n=this;setTimeout((function(){n.end(e,t)}))},e.prototype.clear=function(e){delete D[e],v.clearMarks&&(v.clearMarks("mark_"+e+"_start"),v.clearMarks("mark_"+e+"_end"))},e}(),ne={},ae=function e(t,n){if(t){ne[t]||(ne[t]=0);var a=window.performance.timing;a[t]||ne[t]>=20?(ne[t]=0,n({metricName:t,data:a[t]})):(ne[t]+=1,setTimeout((function(){e(t,n)}),500))}},re=function(e){var t=window.performance.timing;e({metricName:"TTFB",data:t.responseStart-t.navigationStart}),e({metricName:"domInteractive",data:t.domInteractive-t.navigationStart}),"function"==typeof window.performance.getEntriesByName&&window.performance.getEntriesByName("navCompRendered").length>0&&e({metricName:"navCompRendered",data:window.performance.getEntriesByName("navCompRendered")[0].duration}),ae("loadEventEnd",(function(n){var a=n.data;e({metricName:"pageLoaded",data:a-t.navigationStart})})),ae("domContentLoadedEventEnd",(function(n){var a=n.data;e({metricName:"domContentLoaded",data:a-t.navigationStart})}))},oe=function(e,t){e&&("complete"===document.readyState?re(t):window.addEventListener("load",(function(){re(t)})))},ie="g",ce={"networkInformation.effectiveType":ie,"networkInformation.saveData":ie},ue=function(e){var t=e.namespacePrefix,n=e.pageId,a=e.context,r=e.namespaceSuffix,o=e.renderType,i=e.metricName,c=e.hostName;return"".concat(t,".").concat(n+a,".").concat(r,".").concat(c,".").concat(o,".").concat(i)},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.endPoint,n=e.rate,a=void 0===n?.5:n,r=e.pageId,o=e.context,c=e.namespaceSuffix,u=e.namespacePrefix,f=e.ignoreSamplingRate,s=void 0!==f&&f,d=e.renderType,p=e.hostName,m=function(e,t){window.perfume&&window.perfume.enabledBeaconApi&&"function"==typeof navigator.sendBeacon?(console.log("metrics-logger:sending metric by beacon api"),navigator.sendBeacon(e,t)):fetch(e,{method:"post",body:t})},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(ue({namespacePrefix:e.namespacePrefix,pageId:e.pageId,context:e.context,namespaceSuffix:e.namespaceSuffix,renderType:e.renderType,metricName:e.metricName,hostName:e.hostName}),":").concat(e.value,"|")+"".concat(void 0===ce[e.metricName]?"ms":ce[e.metricName])+"".concat(1!==a?"|@".concat(a):"")},v={sendMetric:function(e){var t=[];e.forEach((function(e){var n=e.metricName,a=e.data;"object"===i(a)?Object.keys(a).forEach((function(e){t.push(l({metricName:"".concat(n,".").concat(e),value:a[e],rate:v.rate,namespacePrefix:v.namespacePrefix,pageId:v.pageId,context:v.context,namespaceSuffix:v.namespaceSuffix,renderType:v.renderType,hostName:v.hostName}))})):t.push(l({metricName:n,value:a,rate:v.rate,namespacePrefix:v.namespacePrefix,pageId:v.pageId,context:v.context,namespaceSuffix:v.namespaceSuffix,renderType:v.renderType,hostName:v.hostName}))})),m(v.endPoint,t.join("\n"))},endPoint:t,rate:a,pageId:r,context:o,namespaceSuffix:c,namespacePrefix:u,ignoreSamplingRate:s,renderType:d,hostName:p};return v},se=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.rate,a=t.pageId,r=t.context,o=t.namespaceSuffix,c=t.namespacePrefix,u=t.ignoreSamplingRate,f=void 0===u||u,s=t.renderType,d=t.hostName,p=!1,m=function(t,n){ga("send","timing",t,e.getTimingVar(),n)},l=function(e){void 0!==window.ga&&window.ga?Array.isArray(e)&&e.forEach((function(e){var t=e.metricName,n=e.data;"number"==typeof n?m(t,Math.round(n)):"object"===i(n)&&Object.keys(n).forEach((function(e){"number"==typeof n[e]&&m("".concat(t,".").concat(e),Math.round(n[e]))}))})):p||(console.warn("Google Analytics has not been loaded"),p=!0)};return e={getTimingVar:function(){return ue({pageId:e.pageId,namespacePrefix:c,context:r,namespaceSuffix:o,renderType:s,hostName:d})},sendMetric:l,rate:n,pageId:a,context:r,namespaceSuffix:o,namespacePrefix:c,ignoreSamplingRate:f,renderType:s,hostName:d}};function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u(this,n)}}var pe=new URLSearchParams(window.location.search),me=parseFloat(pe.get("psmetrics_traffic_rate")),le=function(t){var a=t.backends,r=void 0===a?[]:a,c=t.endPoint,u=void 0===c?"/upi/psmetrics":c,f=t.delayTime,s=void 0===f?1e3:f,d=t.rate,p=void 0===d?1:d,m=t.pageId,l=t.namespacePrefix,v=t.namespaceSuffix,y=t.context,g=void 0===y?"":y,x=t.renderType,h=void 0===x?"client":x,T=t.hostName,b=void 0===T?"www.upwork.com":T,w=h;/^client|server$/.test(h)||(w="client");var k=b.replace(/\./g,"_"),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.endPoint,n=e.delayTime,a=e.rate,r=e.pageId,o=e.namespacePrefix,c=e.namespaceSuffix,u=e.context,f=e.backends,s=e.renderType,d=e.hostName;f.push(se({rate:a,pageId:r,namespacePrefix:o,namespaceSuffix:c,context:u,renderType:s,hostName:d})),f.push(fe({endPoint:t,rate:a,pageId:r,namespacePrefix:o,namespaceSuffix:c,context:u,renderType:s,hostName:d}));var p=[],m=a<Math.random(),l=function(e,t){f.forEach((function(n){n[e]=t}))},v=function(){f.forEach((function(e){m&&!e.ignoreSamplingRate||e.sendMetric(p)})),p=[]},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!Number.isNaN(e.data)&&e.data<0||void 0===e.data?console.warn("Incorrect value %f, of metric: %s",e.data,e.metricName):(p.push(e),1===p.length&&setTimeout(v,n))};oe(r,y);var g=function(e){return y(e)};return Object.defineProperty(g,"pageId",{set:function(e){r=e,l("pageId",e)},get:function(){return r}}),Object.defineProperty(g,"endPoint",{set:function(e){t=e,l("endPoint",e)},get:function(){return t}}),Object.defineProperty(g,"rate",{set:function(e){a=e,l("rate",e)},get:function(){return a}}),Object.defineProperty(g,"delayTime",{set:function(e){n=e,l("delayTime",e)},get:function(){return n}}),Object.defineProperty(g,"namespacePrefix",{set:function(e){o=e,l("namespacePrefix",e)},get:function(){return o}}),Object.defineProperty(g,"namespaceSuffix",{set:function(e){c=e,l("namespaceSuffix",e)},get:function(){return c}}),Object.defineProperty(g,"context",{set:function(e){u=e,l("context",e)},get:function(){return u}}),Object.defineProperty(g,"backends",{set:function(e){f=e,l("context",e)},get:function(){return f}}),g.enableBeaconApi=function(){console.log("metrics-logger:enabledBeaconApi"),window.addEventListener("beforeunload",(function(){v()})),"object"===i(window.perfume)&&(window.perfume.enabledBeaconApi=!0)},g}({endPoint:u,delayTime:s,rate:p,pageId:m,namespacePrefix:l,namespaceSuffix:v,context:g,backends:r,renderType:w,hostName:k});return new(function(t){o(r,t);var a=de(r);function r(){return e(this,r),a.apply(this,arguments)}return n(r,[{key:"analyticsTracker",value:function(e){return S(e)}},{key:"sendCustomTiming",value:function(e,t){return this.analyticsTracker({metricName:e,data:t})}},{key:"sendTiming",value:function(e,t){return this.analyticsTracker({metricName:e,data:t})}},{key:"onLoad",value:function(){re(this.analyticsTracker)}},{key:"enableBeaconApi",value:function(){S.enableBeaconApi()}},{key:"pageId",set:function(e){void 0!==e&&(S.pageId=e)},get:function(){return S.pageId}},{key:"endPoint",set:function(e){S.endPoint=e},get:function(){return S.endPoint}},{key:"rate",set:function(e){S.rate=e},get:function(){return S.rate}},{key:"delayTime",set:function(e){S.delayTime=e},get:function(){return S.delayTime}},{key:"namespacePrefix",set:function(e){S.namespacePrefix=e},get:function(){return S.namespacePrefix}},{key:"namespaceSuffix",set:function(e){S.namespaceSuffix=e},get:function(){return S.namespaceSuffix}},{key:"context",set:function(e){S.context=e},get:function(){return S.context}},{key:"backends",set:function(e){S.backends=e},get:function(){return S.backends}}]),r}(te))({analyticsTracker:S,backends:r,endPoint:u,delayTime:s,rate:p,pageId:m,namespacePrefix:l,namespaceSuffix:v,context:g,renderType:w,hostName:k})}({endPoint:"/upi/psmetrics",rate:Number.isNaN(me)?window.PSMETRICS_TRAFFIC_RATE:me,namespacePrefix:"agate.metrics",namespaceSuffix:"ClientSide",pageId:window.PSMETRICS_PAGE_ID,delayTime:1e3,renderType:window.PSMETRICS_RENDER_TYPE,hostName:window.location.hostname||"www.upwork.com"});window.perfume=le}();
